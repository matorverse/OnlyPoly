<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>ONLYPOLY</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="app">
    <div class="bg-gradient"></div>
    <header class="top-bar">
      <div class="logo">ONLYPOLY</div>
      <div class="connection-indicator" id="connectionIndicator">
        LAN
      </div>
    </header>

    <main class="main-layout">
      <section class="board-section">

        <!-- HUD: Positioned outside board grid -->
        <div class="hud-top-left">
          <div id="turnLabel" class="turn-badge">Waiting...</div>
          <div id="moneyDisplay" class="money-badge">$0</div>
          <div id="positionDisplay" class="pos-badge">Tile 0</div>
        </div>

        <div class="board-wrapper">
          <div id="board" class="board-grid"></div>

          <!-- Dice Container Centered on Board -->
          <div class="dice-container-center" id="diceContainer">
            <div class="dice-wrapper">
              <div class="dice" id="dice1">
                <div class="face front"></div>
                <div class="face back"></div>
                <div class="face top"></div>
                <div class="face bottom"></div>
                <div class="face right"></div>
                <div class="face left"></div>
              </div>
              <div class="dice" id="dice2">
                <div class="face front"></div>
                <div class="face back"></div>
                <div class="face top"></div>
                <div class="face bottom"></div>
                <div class="face right"></div>
                <div class="face left"></div>
              </div>
            </div>
          </div>

        </div>
        <div id="playersOverlay" class="players-overlay"></div>
      </section>

      <section class="bottom-panel">
        <div id="lobbyPanel" class="panel lobby-panel glass-panel">
          <div class="login-card">
            <h2 class="title-gradient">Join the Game</h2>
            <div class="input-group">
              <input id="nameInput" placeholder="Enter Display Name" maxlength="16" />
            </div>
            <button id="joinBtn" class="btn-shine primary">Join Lobby</button>
          </div>

          <div class="lobby-card" id="lobbyStatus" hidden>
            <h2 class="title-gradient">Lobby</h2>
            <div id="colorSelection" class="color-selection" hidden>
              <div class="color-grid" id="colorGrid"></div>
            </div>
            <div id="lobbyPlayers" class="pill-list"></div>
            <div class="lobby-actions">
              <button id="readyToggle" class="btn-ghost">Ready</button>
              <button id="startGameBtn" class="btn-shine accent" disabled>Start Game</button>
            </div>
          </div>
        </div>

        <div id="gamePanel" class="panel game-panel hidden">
          <div class="players-info-row" id="playersInfoRow"></div>

          <div class="control-bar">
            <div class="action-row">
              <button id="rollBtn" class="btn-main-action">Roll Dice</button>
              <button id="endTurnBtn" class="btn-sub-action">End Turn</button>
            </div>
          </div>

          <!-- NEW: Docked Action Bar at bottom -->
          <div class="action-dock">
            <button id="buyBtn" class="btn-dock">Buy</button>
            <button id="auctionBtn" class="btn-dock">Auction</button>
            <button id="tradeBtn" class="btn-dock">Trade</button>
            <button id="payJailBtn" class="btn-dock">Pay Jail</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Auction Modal -->
    <div id="auctionModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-sheet">
        <h2>Auction</h2>
        <div id="auctionInfo" class="auction-info"></div>
        <div class="auction-bid-row">
          <button class="btn bid" data-step="2">+2</button>
          <button class="btn bid" data-step="10">+10</button>
          <button class="btn bid" data-step="100">+100</button>
        </div>
        <div id="auctionTimer" class="auction-timer"></div>
      </div>
    </div>

    <!-- Trade Modal -->
    <div id="tradeModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-sheet">
        <h2>Trade</h2>
        <div id="tradeContent" class="trade-content"></div>
      </div>
    </div>

    <!-- Secondary Menu -->
    <div id="secondaryMenu" class="secondary-menu hidden">
      <div class="secondary-menu-backdrop"></div>
      <div class="secondary-menu-sheet">
        <div class="secondary-menu-header">
          <h3>Menu</h3>
          <button id="closeSecondaryMenu" class="btn btn-ghost">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
        <div class="secondary-menu-content">
          <button id="propertiesBtn" class="menu-item">
            <span class="menu-item-icon">üè†</span>
            <span class="menu-item-text">Properties</span>
            <span class="menu-item-count" id="propertiesCount">(0)</span>
          </button>
          <button id="playersBtn" class="menu-item">
            <span class="menu-item-icon">üë•</span>
            <span class="menu-item-text">Players</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Properties Panel -->
    <div id="propertiesPanel" class="properties-panel hidden">
      <div class="properties-panel-backdrop"></div>
      <div class="properties-panel-sheet">
        <div class="properties-panel-header">
          <h3 class="properties-panel-title">Properties (0)</h3>
          <button id="closeProperties" class="btn btn-ghost">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
        <div class="properties-content">
          <div id="propertiesList" class="properties-list"></div>
        </div>
      </div>
    </div>

    <!-- Menu Toggle Button -->
    <div class="menu-toggle-container">
      <button id="menuToggle" class="menu-toggle">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M3 5h14M3 10h14M3 15h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </button>
    </div>

    <!-- Toasts -->
    <div id="toastContainer" class="toast-container"></div>
  </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="animations.js"></script>
  <script src="ui.js"></script>
  <script src="dice.js"></script>
  <script src="game.js"></script>
</body>

</html>